<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parental Preferences - Activity Guide</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Platform Navigation -->
    <div id="platformNavContainer"></div>
    
    <div class="no-print header">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; margin-bottom: 15px;">
            <div>
                <h1>ğŸ¨ Parental Preferences Activity Guide</h1>
                <p>Which activities do Mom and Dad love to do with you?</p>
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="dashboardBtn" class="btn btn-secondary" style="display: none;">âš™ï¸ Dashboard</button>
                <button id="adminBtn" class="btn btn-help" style="display: none;">ğŸ›¡ï¸ Admin</button>
            </div>
        </div>
        <div class="data-source-switcher" style="margin-bottom: 15px; padding: 12px; background: #f5f5f5; border-radius: 8px;">
            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                <label style="font-weight: 600; color: #555;">ğŸ“Š Data Source:</label>
                <div style="display: flex; gap: 10px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="dataSource" value="sheets" id="sourceSheets" checked>
                        <span>Google Sheets</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="dataSource" value="builtin" id="sourceBuiltin">
                        <span>Built-in Preferences</span>
                    </label>
                </div>
                <button id="managePrefsBtn" class="btn btn-secondary" style="display: none;">âœï¸ Manage Preferences</button>
            </div>
        </div>
        <div class="controls">
            <button id="refreshBtn" class="btn btn-primary">ğŸ”„ Refresh Data</button>
            <button id="printBtn" class="btn btn-secondary">ğŸ–¨ï¸ Print</button>
            <button id="helpBtn" class="btn btn-help">â“ Troubleshooting</button>
        </div>
        <div id="loading" class="loading">Loading activities...</div>
        <div id="error" class="error"></div>
        <div id="help" class="help-section">
            <h3>ğŸ“‹ Troubleshooting Steps</h3>
            <ol>
                <li><strong>Check Sheet Sharing:</strong> Open your Google Sheet from the dashboard</li>
                <li>Click the <strong>"Share"</strong> button (top right)</li>
                <li>Under "General access", select <strong>"Anyone with the link"</strong></li>
                <li>Make sure it says <strong>"Viewer"</strong></li>
                <li>Click <strong>"Done"</strong> and then click "ğŸ”„ Refresh Data" here</li>
            </ol>
            <p><strong>Alternative:</strong> File â†’ Share â†’ Publish to web â†’ Publish (this makes it publicly accessible)</p>
        </div>
    </div>

    <div id="categories" class="categories-container">
        <!-- Categories will be dynamically inserted here -->
    </div>

    <div class="print-footer">
        <p>ğŸ’œ Activities updated from Google Sheets | Made with love for learning together!</p>
    </div>

    <script src="supabase-config.js"></script>
    <script>
        // Load platform navigation
        fetch('platform-nav.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('platformNavContainer').innerHTML = html;
                // Load platform nav JavaScript
                const script = document.createElement('script');
                script.src = 'platform-nav.js';
                document.body.appendChild(script);
                // Set current app context after script loads
                script.onload = () => {
                    if (window.platformNav) {
                        window.platformNav.setCurrentApp('parental-prefs', 'Parental Preferences', 'ğŸ¨');
                    }
                };
            })
            .catch(error => console.error('Error loading platform nav:', error));
    </script>
    <script src="script.js"></script>
</body>
</html>
